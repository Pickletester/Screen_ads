<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=845, height=314, initial-scale=1.0">
    <title>Novastar Live Feed</title>
    <style>
        body { margin: 0; padding: 0; background-color: #000; overflow: hidden; }
        #container { width: 845px; height: 314px; position: relative; }
        
        /* Media Styling */
        img, video { 
            width: 100%; 
            height: 100%; 
            position: absolute; 
            top: 0; 
            left: 0; 
            display: none; 
            object-fit: fill; 
        }
        .active { display: block; }

        /* LIVE Badge */
        #live-badge {
            position: absolute; top: 10px; right: 10px;
            background-color: rgba(255, 0, 0, 0.7); color: white;
            padding: 2px 6px; font-family: sans-serif; font-size: 10px;
            font-weight: bold; border-radius: 3px; z-index: 100;
            pointer-events: none;
        }
    </style>
</head>
<body>

    <div id="container">
        <div id="live-badge">ðŸ”´ LIVE</div>
        </div>

    <script>
        // ==================================================
        //        YOUR LIVE PLAYLIST
        // ==================================================
        var liveFeed = [
            { type: 'image', url: 'Applebox.jpg', duration: 10 },
            { type: 'image', url: 'Comcast.jpg', duration: 10 },
            { type: 'image', url: 'Feet_DR.jpg', duration: 10 }, 
            { type: 'image', url: 'Howard_Hannah.jpg', duration: 10 },
            { type: 'image', url: 'Itaily.jpg', duration: 10 },
            { type: 'image', url: 'J_Frances2.jpg', duration: 10 },
            
            // UPDATED: Lorenzi is now 30 seconds
            { type: 'image', url: 'Lorenzi.jpg', duration: 30 },
            
            { type: 'image', url: 'Mission.jpg', duration: 10 },
            { type: 'image', url: 'Pickleball_lifeline.jpg', duration: 10 },
            { type: 'image', url: 'Sun_Chevy.jpg', duration: 10 },
            { type: 'image', url: 'ad1.jpg', duration: 10 },
            
            // âš ï¸ CHECK THIS DURATION (currently 15s)
            { type: 'video', url: 'Screen_2_1.mp4', duration: 15 } 
        ];
        // ==================================================


        var container = document.getElementById('container');
        var currentIndex = 0;

        function getSyncedStartIndex() {
            var totalLoopTime = 0;
            liveFeed.forEach(item => { totalLoopTime += item.duration; });
            var now = Math.floor(Date.now() / 1000);
            var timeIntoLoop = now % totalLoopTime;
            
            var accumulatedTime = 0;
            for (var i = 0; i < liveFeed.length; i++) {
                var itemDuration = liveFeed[i].duration;
                if (timeIntoLoop < accumulatedTime + itemDuration) {
                    return { 
                        index: i, 
                        remaining: (accumulatedTime + itemDuration) - timeIntoLoop 
                    };
                }
                accumulatedTime += itemDuration;
            }
            return { index: 0, remaining: liveFeed[0].duration };
        }

        function playNext(firstRun = false, overrideDuration = null) {
            if (currentIndex >= liveFeed.length) currentIndex = 0;
            var item = liveFeed[currentIndex];
            var durationToPlay = overrideDuration || item.duration;

            var children = Array.from(container.children);
            children.forEach(child => {
                if(child.id !== 'live-badge') container.removeChild(child);
            });

            if (item.type === 'image') {
                var img = document.createElement('img');
                img.src = item.url;
                img.className = 'active';
                container.appendChild(img);
                setTimeout(function() {
                    currentIndex++;
                    playNext();
                }, durationToPlay * 1000);
            } 
            else if (item.type === 'video') {
                var vid = document.createElement('video');
                vid.src = item.url;
                vid.className = 'active';
                vid.muted = true;
                vid.autoplay = true;
                vid.playsInline = true;
                if (firstRun && overrideDuration) {
                   vid.currentTime = item.duration - overrideDuration;
                }
                vid.onended = function() {
                    currentIndex++;
                    playNext();
                };
                vid.onerror = function() {
                    currentIndex++;
                    playNext();
                };
                container.appendChild(vid);
            }
        }

        var startData = getSyncedStartIndex();
        currentIndex = startData.index;
        playNext(true, startData.remaining);
    </script>
</body>
</html>
